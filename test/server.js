const express = require('express');
const cors = require('cors'); // Import the cors middleware
const app = express();
const port = 5000;

// Middleware to parse JSON bodies
app.use(express.json());

// Enable CORS for http://localhost:3000
app.use(cors({
  origin: 'http://localhost:3000'
}));

// Mock data from the provided JSON file
const mockData = {
    content_related: "05河北-6. 廊坊市人民政府办公室印发关于进一步优化营商环境降低市场主体制度性交易成本的 61 条措施的通知.docx；16海南-4.海南省知识产权局关于印发《海南省专利奖评奖办法》的通知（2023年4月28日）.docx",
    model_answer: "\n根据提供的上下文，河北省廊坊市在知识产权保护方面采取了以下措施：\n\n1. **加强地理标志保护**：注重加强对地理标志的保护。\n2. **加大对特定领域知识产权保护力度**：加大对大数据、人工智能、基因技术等新领域的知识产权保护力度。\n3. **加强刑事、行政、民事审判工作**：通过加强刑事、行政、民事审判工作，继续加大涉知识产权侵权案件审理力度，严厉打击知识产权侵权、恶意诉讼等违法犯罪行为。\n4. **依法从速审理知识产权案件**：依法从速审理知识产权侵权案件，维护当事人的合法权益，提升司法公信力。\n5. **推广知识产权保护措施**：鼓励和支持企业、个人采取有效的知识产权保护措施，如专利申请、商标注册等。\n6. **完善知识产权法律法规体系**：不断完善知识产权相关的法律法规体系，确保知识产权得到有效保护。\n\n虽然提供的文档没有详细列出所有具体的知识产权保护措施方案，但从上述措施可以看出，河北省廊坊市在知识产权保护方面采取了多方面的综合措施，旨在构建一个更加健全和有效的知识产权保护体系。不过，具体的详细方案可能需要进一步查阅相关政策文件或联系相关部门获取。\n\n",
    title_related: "05河北-1. 河北省市场监督管理局关于印发 2023 年全省知识产权行政保护实施方案的通知.pdf\n",
    title_summary: "### 2023年河北省知识产权行政保护实施方案摘要\n\n河北省市场监督管理局发布的《2023年全省知识产权行政保护实施方案》提出了多个具体的政策措施，旨在加强知识产权保护工作，推动高质量发展。\n\n#### 一、主要任务\n\n1. **强化行政保护制度保障**  \n   - **法治根基建设**：贯彻执行《商标侵权判断标准》及《专利侵权纠纷行政裁决办案指南》，推动知识产权保护立法，争取出台《河北省知识产权保护条例》，完善法规体系。\n   - **保护评价体系完善**：优化省知识产权保护联席会议办公室的考核机制，将知识产权保护纳入营商环境和质量强省战略的考核评价体系，定期进行满意度调查和水平评估。\n\n2. **夯实行政保护工作基础**  \n   - **专利侵权行政裁决**：推广“五四二一”工作法，畅通案件受理渠道，推动专利侵权案件的繁简分流，提升办案效率。加强对民营企业、外资企业及中小微企业等专利侵权案件的处理。\n   - **商标专用权保护**：规范商标使用行为，打击非法使用商标的行为，特别是在商标印制、生产流通等环节，重视驰名商标的保护。\n   - **地理标志保护**：加强地理标志产品的保护和监管，提升地理标志的质量控制和抽检频次，确保高标准管理与高质量发展。\n   - **信用监管**：落实《关于做好知识产权领域信用分级分类监管工作的通知》，加强企业信用信息的归集与共享，推动“双随机、一公开”监管模式，提升监管效能。\n\n3. **聚焦重点领域和关键环节**  \n   - **重大活动和节点保护**：加强对国际大型赛事、展会等活动的知识产权保护，实施展会知识产权保护指引，开展展前排查、展中巡查、展后追查等工作。\n   - **民生领域知识产权保护**：加大对食品、药品、民生物资及绿色低碳技术领域的保护力度，关注公共卫生相关领域的知识产权问题。\n   - **重点市场保护**：加强对电商平台的知识产权保护，推动实施全流程管理和保护，加强线上线下侵权假冒行为的打击，提升海外知识产权纠纷应对能力。\n\n4. **优化行政保护工作机制**  \n   - **快速协同保护机制**：推动唐山、雄安新区等地知识产权保护中心的建设，发挥“一站式”知识产权保护服务平台的作用，完善调解机制，推动与法院的专利侵权纠纷调解协议司法确认。\n   - **数字化保护监管**：探索运用互联网、大数据、云计算等技术提升知识产权保护的数字化监管水平，推进线上办案，建立协同的数字化保护体系。\n   - **试点示范**：支持有条件的市争创国家知识产权保护示范区，推动晋州鸭梨、涞水麻核桃等地理标志产品保护示范区的建设。\n   - **数字知识产权保护**：推动大数据、人工智能等新兴领域的知识产权保护，加强数字经济的法治保障。\n\n#### 二、具体政策措施概述  \n通过以上政策措施，河北省计划通过加强法律保障、完善保护机制、聚焦重点领域、优化工作机制等手段，提升知识产权保护水平，为地方经济发展和创新创造提供强有力的保障。\n\n"
};

// POST endpoint to handle question submissions
app.post('/generate_answer', (req, res) => {
    const question = req.body.question && req.body.question.trim();

    // Validate that a question is provided
    if (!question) {
        return res.json({ error: "问题不能为空，请输入一个问题。" });
    }

    // For this mock API, simply return the pre-defined data.
    res.json({ answer: mockData });
});

// Start the server
app.listen(port, () => {
    console.log(`Server is running on http://localhost:${port}`);
});
